!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("@techiediaries/ngx-textarea-autosize",["exports","@angular/core"],e):e(((t=t||self).techiediaries=t.techiediaries||{},t.techiediaries["ngx-textarea-autosize"]={}),t.ng.core)}(this,function(t,e){"use strict";var i=function(){function t(){}return Object.defineProperty(t.prototype,"nativeWindow",{get:function(){return window},enumerable:!0,configurable:!0}),t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),n=function(){function t(t,i,n){this.element=t,this._window=i,this._zone=n,this.onlyGrow=!1,this.useImportant=!1,this.resized=new e.EventEmitter,this.retries=0,this._destroyed=!1,"TEXTAREA"!==this.element.nativeElement.tagName?this._findNestedTextArea():(this.textAreaEl=this.element.nativeElement,this.textAreaEl.style.overflow="hidden",this._onTextAreaFound())}return Object.defineProperty(t.prototype,"minRows",{set:function(t){this._minRows=t,this.textAreaEl&&(this.textAreaEl.rows=t)},enumerable:!0,configurable:!0}),t.prototype.onInput=function(t){this.adjust()},t.prototype.ngOnDestroy=function(){this._destroyed=!0,this._windowResizeHandler&&this._window.nativeWindow.removeEventListener("resize",this._windowResizeHandler,!1)},t.prototype.ngAfterContentChecked=function(){this.adjust()},t.prototype.ngOnChanges=function(t){this.adjust(!0)},t.prototype._findNestedTextArea=function(){var t=this;this.textAreaEl=this.element.nativeElement.querySelector("TEXTAREA"),!this.textAreaEl&&this.element.nativeElement.shadowRoot&&(this.textAreaEl=this.element.nativeElement.shadowRoot.querySelector("TEXTAREA")),this.textAreaEl?(this.textAreaEl.style.overflow="hidden",this._onTextAreaFound()):this.retries>=3?console.warn("ngx-autosize: textarea not found"):(this.retries++,setTimeout(function(){t._findNestedTextArea()},100))},t.prototype._onTextAreaFound=function(){var t=this;this._addWindowResizeHandler(),setTimeout(function(){t.adjust()})},t.prototype._addWindowResizeHandler=function(){var t=this;this._windowResizeHandler=function(t,e,i){void 0===i&&(i=!1);var n;return function(){var o=this,r=arguments,s=function(){n=null,i||t.apply(o,r)},a=i&&!n;clearTimeout(n),n=setTimeout(s,e),a&&t.apply(o,r)}}(function(){t._zone.run(function(){t.adjust()})},200),this._zone.runOutsideAngular(function(){t._window.nativeWindow.addEventListener("resize",t._windowResizeHandler,!1)})},t.prototype.adjust=function(t){if(void 0===t&&(t=!1),!this._destroyed&&this.textAreaEl&&this.textAreaEl.parentNode){var e=this.textAreaEl.value;if(!1===t&&e===this._oldContent&&this.textAreaEl.offsetWidth===this._oldWidth)return;this._oldContent=e,this._oldWidth=this.textAreaEl.offsetWidth;var i=this.textAreaEl.cloneNode(!0),n=this.textAreaEl.parentNode;i.style.width=this.textAreaEl.offsetWidth+"px",i.style.visibility="hidden",i.style.position="absolute",i.textContent=e,n.appendChild(i),i.style.overflow="hidden",i.style.height="auto";var o=i.scrollHeight,r=this._window.nativeWindow.getComputedStyle(i,null);o+=parseInt(r.getPropertyValue("border-top-width")),o+=parseInt(r.getPropertyValue("border-bottom-width"));var s=this.textAreaEl.offsetHeight,a=o>s;if(!1===this.onlyGrow||a){var d=this._getLineHeight(),l=o/d;if(this._minRows&&this._minRows>=l)o=this._minRows*d;else if(this.maxRows&&this.maxRows<=l){var h=this.maxRows*d;o=this.onlyGrow?Math.max(h,s):h,this.textAreaEl.style.overflow="auto"}else this.textAreaEl.style.overflow="hidden";var u=o+"px",p=this.useImportant?"important":"";this.textAreaEl.style.setProperty("height",u,p),this.resized.emit(o)}n.removeChild(i)}},t.prototype._getLineHeight=function(){var t=parseInt(this.textAreaEl.style.lineHeight,10);if(isNaN(t)&&this._window.nativeWindow.getComputedStyle){var e=this._window.nativeWindow.getComputedStyle(this.textAreaEl);t=parseInt(e.lineHeight,10)}if(isNaN(t)){var i=this._window.nativeWindow.getComputedStyle(this.textAreaEl,null).getPropertyValue("font-size");t=Math.floor(1.5*parseInt(i.replace("px",""),10))}return t},t.decorators=[{type:e.Directive,args:[{selector:"[autosize]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:i},{type:e.NgZone}]},t.propDecorators={minRows:[{type:e.Input}],maxRows:[{type:e.Input}],onlyGrow:[{type:e.Input}],useImportant:[{type:e.Input}],resized:[{type:e.Output}],onInput:[{type:e.HostListener,args:["input",["$event.target"]]}]},t}();var o=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[n],imports:[],providers:[i],exports:[n]}]}],t}();t.AutosizeDirective=n,t.AutosizeModule=o,t.ɵa=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=techiediaries-ngx-textarea-autosize.umd.min.js.map